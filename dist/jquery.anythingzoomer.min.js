/*! AnythingZoomer v2.2.7 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";return a.anythingZoomer=function(b,c){var d,e,f,g=this;g.$wrap=a(b),g.wrap=b,g.$wrap.data("zoomer",g),g.version="2.2.6",g.init=function(){g.options=e=a.extend({},a.anythingZoomer.defaultOptions,c),d=a.anythingZoomer.classNames,g.state=!0,g.enabled=!0,g.hovered=!1,g.$wrap.addClass(d.wrap).wrapInner('<span class="'+d.wrapInner+'"/>'),g.$inner=g.$wrap.find("."+d.wrapInner),g.$small=g.$wrap.find("."+e.smallArea),g.$large=g.$wrap.find("."+e.largeArea),g.update(),g.$large.addClass(d.large),g.$small.addClass(d.small),g.$inner.bind("mouseenter"+d.namespace,function(){g.enabled&&(g.saved=g.enabled,g.hovered=!0,e.delay?(clearTimeout(g.delay),g.enabled=!1,g.delay=setTimeout(function(){g.enabled=g.saved,g.position.type="mousemove",g.$inner.trigger(g.position),g.reveal()},e.delay)):g.reveal())}).bind("mouseleave"+d.namespace,function(){g.hovered=!1,g.enabled&&(e.delay&&(clearTimeout(g.delay),g.enabled=g.saved),g.state&&g.enabled&&(g.timer=setTimeout(function(){g.$zoom.hasClass(d.windowed)&&g.hideZoom(!0)},200)))}).bind("mousemove"+d.namespace,function(a){if(g.enabled&&(g.position=a,g.hovered&&g.state&&g.enabled)){clearTimeout(g.timer);var b=g.$small.offset();g.zoomAt(a.pageX-b.left,a.pageY-b.top,null,!0)}}).bind(e.switchEvent+(""!==e.switchEvent?d.namespace:""),function(){g.enabled&&(g.state?g.showLarge():g.showSmall())}),g.showSmall(),a.each("initialized zoom unzoom".split(" "),function(b,c){a.isFunction(e[c])&&g.$wrap.bind(c,e[c])}),g.initialized=!0,g.$wrap.trigger("initialized",g)},g.reveal=function(){g.enabled=g.saved,g.state&&g.enabled&&(g.$zoom.stop(!0,!0).fadeIn(e.speed),e.overlay&&g.$overlay.addClass(d.overlay),g.$smInner.addClass(d.hovered),g.$wrap.trigger("zoom",g))},g.update=function(){g.initialized&&g.showSmall(),g.$smInner=g.$small.find("."+d.smallInner).length?g.$small.find("."+d.smallInner):g.$small.wrapInner('<span class="'+d.smallInner+'"/>').find("."+d.smallInner),g.$small.find("."+d.overly).remove(),e.clone&&(f=g.$smInner.clone().removeAttr("id").removeClass(d.smallInner).addClass(d.largeInner),g.$large.length?g.$large.html(f.html()):(f.wrap('<div class="'+e.largeArea+'">'),g.$small.after(f.parent()),g.$large=g.$wrap.find("."+e.largeArea))),g.$lgInner=g.$large.find("."+d.largeInner).length?g.$large.find("."+d.largeInner):g.$large.wrapInner('<span class="'+d.largeInner+'"/>').find("."+d.largeInner),g.$wrap.find("."+d.zoom).length||(g.$large.wrap('<div class="'+d.zoom+'"/>'),g.$zoom=g.$wrap.find("."+d.zoom)),e.edit&&!g.edit&&(g.edit=a('<span class="'+d.edit+'"></span>').appendTo(g.$zoom)),g.$zoom.show(),g.largeDim=[g.$lgInner.children().width(),Math.max(g.$lgInner.height(),g.$lgInner.children().height())],g.zoomDim=g.last=[g.$zoom.width(),g.$zoom.height()],g.$zoom.hide(),g.smallDim=[g.$smInner.children().width(),g.$small.height()],g.$overlay=a('<div class="'+d.overly+'" style="position:absolute;left:0;top:0;" />').prependTo(g.$small),g.ratio=[g.largeDim[0]/(g.smallDim[0]||1),g.largeDim[1]/(g.smallDim[1]||1)],g.$inner.add(g.$overlay).css({width:g.smallDim[0],height:g.smallDim[1]})},g.showSmall=function(){g.state=!0,g.$small.show(),g.$zoom.removeClass(d.expanded).addClass(d.windowed+" "+d.zoom).css({width:g.zoomDim[0],height:g.zoomDim[1]}),g.$inner.css({width:g.smallDim[0],height:g.smallDim[1]})},g.showLarge=function(){g.state=!1,g.$small.hide(),g.$zoom.stop(!0,!0).fadeIn(e.speed).addClass(d.expanded).removeClass(d.windowed+" "+d.zoom).css({height:"auto",width:"auto"}),g.$inner.css({width:g.largeDim[0],height:g.largeDim[1]}),g.$large.css({left:0,top:0,width:g.largeDim[0],height:g.largeDim[1]})},g.setTarget=function(b,c,f){var h,i=0,j=0;clearTimeout(g.timer),g.$zoom.hasClass(d.windowed)||g.showSmall(),isNaN(b)||isNaN(c)?"string"==typeof b&&a(b).length&&(h=a(b),i=h.position().left+h.width()/2+(c?c[0]||0:0),j=h.position().top+h.height()/2+(c?c[1]||0:0)):(i=parseInt(b,10),j=parseInt(c,10)),g.zoomAt(i,j,f),e.overlay&&g.$overlay.addClass(d.overlay),g.$smInner.addClass(d.hovered),g.$wrap.trigger("zoom",g)},g.zoomAt=function(a,b,c,d){var f=(c?c[0]||0:0)||g.last[0],h=(c?c[1]||c[0]||0:0)||g.last[1],i=f/2,j=h/2,k=e.edge||(0===e.edge?0:.66*i),l=e.edge||(0===e.edge?0:.66*j),m=parseInt(g.$inner.css("margin-left"),10)||g.$inner.position().left||0;return g.last=[f,h],g.current=[a,b],e.edit&&g.edit.html(Math.round(a)+", "+Math.round(b)),a<-k||a>g.smallDim[0]+k||b<-l||b>g.smallDim[1]+l?void g.hideZoom(d):(g.$zoom.stop(!0,!0).fadeIn(e.speed),g.$zoom.css({left:a-i+m,top:b-j,width:f,height:h}),void g.$large.css({left:-(a-e.offsetX-i/2)*g.ratio[0],top:-(b-e.offsetY-j/2)*g.ratio[1]}))},g.hideZoom=function(a){a&&g.$smInner.hasClass(d.hovered)&&g.$wrap.trigger("unzoom",g),g.last=g.zoomDim,g.$zoom.stop(!0,!0).fadeOut(e.speed),g.$overlay.removeClass(d.overlay),g.$smInner.removeClass(d.hovered),g.lastKey=null},g.setEnabled=function(a){if(g.enabled=a,a){var b=g.$small.offset();g.zoomAt(g.position.pageX-b.left,g.position.pageY-b.top,null,!0)}else g.showSmall(),g.hideZoom(),g.hovered=!1},g.init()},a.anythingZoomer.classNames={namespace:".anythingZoomer",wrap:"az-wrap",wrapInner:"az-wrap-inner",large:"az-large",largeInner:"az-large-inner",small:"az-small",smallInner:"az-small-inner",overlay:"az-overlay",overly:"az-overly",hovered:"az-hovered",zoom:"az-zoom",windowed:"az-windowed",expanded:"az-expanded",edit:"az-coords"},a.anythingZoomer.defaultOptions={smallArea:"small",largeArea:"large",clone:!1,overlay:!1,speed:100,edge:30,offsetX:0,offsetY:0,switchEvent:"dblclick",delay:0,edit:!1},a.fn.anythingZoomer=function(b,c,d,e){return this.each(function(){var f=a(this).data("zoomer");/object|undefined/.test(typeof b)?f?f.update():new a.anythingZoomer(this,b):!f||"string"!=typeof b&&(isNaN(b)||isNaN(c))||(/(en|dis)able/.test(b)?f.setEnabled("enable"===b):f.setTarget(b,c,d,e))})},a.fn.getAnythingZoomer=function(){return this.data("zoomer")},a.anythingzoomer});